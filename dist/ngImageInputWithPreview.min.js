/*! ngImageInputWithPreview v0.0.1 */
!function(a){"use strict";!function(){var b=a.module("fileReaderService",[]);b.factory("fileReader",["$q",function(a){var b=function(a,b,c){return function(){c.$apply(function(){b.resolve(a.result)})}},c=function(a,b,c){return function(){c.$apply(function(){b.reject(a.result)})}},d=function(a,d){var e=new FileReader;return e.onload=b(e,a,d),e.onerror=c(e,a,d),e},e=function(b,c){var e=a.defer(),f=d(e,c);return f.readAsDataURL(b),e.promise};return{readAsDataUrl:e}}])}(),function(){var b=a.module("ngImageInputWithPreview",["fileReaderService"]);b.directive("imageWithPreview",["fileReader","$q",function(a,b){var c="this-is-not-an-image",d=function(a,b){var c=a.split(",");return c.some(function(a){if(a===b.type)return!0;var c=a.split("/"),d=b.type.split("/");return 2===c.length&&2===d.length&&"*"===c[1]&&c[0]===d[0]})};return{restrict:"A",require:"ngModel",scope:{image:"=ngModel",allowedTypes:"@accept"},link:function(e,f,g,h){f.bind("change",function(a){var b=(a.srcElement||a.target).files[0];h.$setViewValue(b,"change")}),h.$parsers.push(function(b){return b?d(e.allowedTypes,b)?{fileReaderPromise:a.readAsDataUrl(b,e)}:c:b}),e.$watch("image",function(a){a&&"string"==typeof a&&(e.image={src:a,isPath:!0})}),h.$validators.image=function(a,b){var d=a||b;return d!==c},h.$asyncValidators.parsing=function(a,c){var d=a||c,e=b.defer();if(d&&d.fileReaderPromise){var f=d.fileReaderPromise;delete d.fileReaderPromise,f.then(function(a){d.src=a,e.resolve(!0)},function(){e.resolve(!1)})}else e.resolve(!0);return e.promise}}}}])}()}(window.angular);